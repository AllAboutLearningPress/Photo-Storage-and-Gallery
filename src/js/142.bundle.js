(self.webpackChunkphoto_storage_and_gallery=self.webpackChunkphoto_storage_and_gallery||[]).push([[142],{142:(e,t,i)=>{"use strict";i.r(t),i.d(t,{img_comparison_slider:()=>a});var o=i(480);const s=e=>({x:e.touches[0].pageX,y:e.touches[0].pageY}),n={ArrowLeft:-1,ArrowRight:1},a=class{constructor(e){(0,o.r)(this,e),this.exposure=50,this.isMouseDown=!1,this.isFocused=!1,this.onWindowMouseMove=e=>{this.isMouseDown&&this.slideToPageX(e.pageX)},this.bodyUserSelectStyle="",this.isTouchComparing=!1,this.hasTouchMoved=!1}componentWillLoad(){this.el.querySelectorAll("img").forEach((e=>{e.addEventListener("dragstart",(e=>{e.preventDefault()})),e.addEventListener("load",(()=>{this.updateAfterWidth()}))}))}componentDidRender(){this.slide(0),this.updateAfterWidth(),this.el.setAttribute("tabindex","0")}disconnectedCallback(){this.transitionTimer&&window.clearTimeout(this.transitionTimer)}slide(e=0,t=!1){var i;if(this.exposure=(i=this.exposure+e)<0?0:i>100?100:i,t){const e=100;this.after.style.transition=`width ${e}ms`,this.transitionTimer=window.setTimeout((()=>{this.after.style.transition=null,this.transitionTimer=null}),e)}this.after.style.width=this.exposure+"%"}onKeyDown(e){if(this.keyboardSlideAnimationTimeoutId)return;const t=e.key;Object.keys(n).includes(t)&&this.startSlideAnimation(n[t])}onKeyUp(e){this.keyboardSlideAnimationTimeoutId&&Object.keys(n).includes(e.key)&&this.stopSlideAnimation()}onMouseDown(e){window.addEventListener("mousemove",this.onWindowMouseMove),this.isMouseDown=!0,this.slideToPageX(e.pageX,!0),this.el.focus(),this.bodyUserSelectStyle=window.document.body.style.userSelect,window.document.body.style.userSelect="none"}onMouseUp(e){this.isMouseDown=!1,window.document.body.style.userSelect=this.bodyUserSelectStyle,window.removeEventListener("mousemove",this.onWindowMouseMove)}onTouchStart(e){this.touchStartPoint=s(e),this.isFocused&&this.slideToPageX(e.touches[0].pageX,!0)}onTouchMove(e){if(this.isTouchComparing)return this.slideToPageX(e.touches[0].pageX),e.preventDefault(),!1;if(!this.hasTouchMoved){const t=s(e);if(Math.abs(t.y-this.touchStartPoint.y)<Math.abs(t.x-this.touchStartPoint.x))return this.isTouchComparing=!0,this.el.focus(),this.slideToPageX(e.touches[0].pageX,!0),e.preventDefault(),!1;this.hasTouchMoved=!0}}touchEnd(){this.isTouchComparing=!1,this.hasTouchMoved=!1}onBlur(){this.stopSlideAnimation(),this.isFocused=!1}onFocus(){this.isFocused=!0}updateAfterWidth(){this.imageWidth=this.el.offsetWidth,this.afterImageContainer.style.width=this.el.offsetWidth+"px"}slideToPageX(e,t=!1){const i=e-this.el.getBoundingClientRect().left-window.scrollX;this.exposure=i/this.imageWidth*100,this.slide(0,t)}startSlideAnimation(e){const t=1*e,i=()=>{this.keyboardSlideAnimationTimeoutId=window.setTimeout((()=>{this.animationRequestId=window.requestAnimationFrame(i)}),1e3/120),this.slide(t)};i()}stopSlideAnimation(){this.keyboardSlideAnimationTimeoutId&&(window.clearTimeout(this.keyboardSlideAnimationTimeoutId),window.cancelAnimationFrame(this.animationRequestId),this.keyboardSlideAnimationTimeoutId=null,this.animationRequestId=null)}render(){return(0,o.h)("div",null,(0,o.h)("div",{class:"before",ref:e=>this.before=e},(0,o.h)("slot",{name:"before"})),(0,o.h)("div",{class:"after",ref:e=>this.after=e},(0,o.h)("div",{class:"handle-wrapper"},(0,o.h)("slot",{name:"handle"},(0,o.h)("div",{class:"handle"}))),(0,o.h)("div",{class:"after-overlay"},(0,o.h)("div",{ref:e=>this.afterImageContainer=e},(0,o.h)("slot",{name:"after"})))))}get el(){return(0,o.g)(this)}};a.style=':host{--divider-width:1px;--divider-color:#d7d7d7;--handle-size:40px;--handle-color:#d7d7d7;--handle-opacity:0.5;--handle-opacity-active:0;position:relative;display:inline-block;font-size:0;overflow:hidden;isolation:isolate;line-height:0}:host(:focus) .handle-wrapper{opacity:var(--handle-opacity-active)}::slotted(img){-webkit-user-drag:none;-khtml-user-drag:none;-moz-user-drag:none;-o-user-drag:none;user-drag:none;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.before{position:relative;z-index:-2}.after{position:absolute;left:0;top:0;bottom:0;z-index:-1}.after .after-overlay{overflow:hidden}.after:before{content:" ";position:absolute;display:block;right:calc(var(--divider-width) * -0.5);top:0;bottom:0;border-right-width:var(--divider-width);border-right-style:solid;border-right-color:var(--divider-color)}.handle-wrapper{position:absolute;width:var(--handle-size);height:var(--handle-size);margin-top:calc(var(--handle-size) / (-2));margin-right:calc(var(--handle-size) / (-2));top:50%;right:0;pointer-events:none;-webkit-box-sizing:border-box;box-sizing:border-box;opacity:var(--handle-opacity);-webkit-transition:opacity 1s;transition:opacity 1s}.handle{background-color:var(--handle-color);width:var(--handle-size);height:var(--handle-size);-webkit-transition:-webkit-transform 1s;transition:-webkit-transform 1s;transition:transform 1s;transition:transform 1s, -webkit-transform 1s;-webkit-transform:rotate(45deg);transform:rotate(45deg);-webkit-box-shadow:0px 0px 15px 0px rgba(0, 0, 0, 0.75);box-shadow:0px 0px 15px 0px rgba(0, 0, 0, 0.75)}.focused .handle{-webkit-transform:rotate(45deg) scale(1.5);transform:rotate(45deg) scale(1.5)}'}}]);